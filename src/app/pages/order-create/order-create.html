<div class="container py-5" [ngClass]="themeService.isDark() ? 'text-white' : 'text-dark'">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <a routerLink="/dashboard" class="btn btn-link text-decoration-none p-0 text-secondary">
        <i class="bi bi-arrow-left-circle fs-4 me-2"></i>
        <span class="fw-semibold">Regresar al Inicio</span>
      </a>

      <div
        class="card border-0 shadow-sm rounded-4"
        [ngClass]="themeService.isDark() ? 'bg-dark border-secondary' : 'bg-white'"
      >
        <div class="card-body p-4 p-md-5">
          <h3 class="fw-bold mb-4">
            <i
              class="bi text-primary me-2"
              [ngClass]="userRole.includes('ADMIN') ? 'bi-shop' : 'bi-house-up'"
            ></i>
            {{
              userRole.includes('ADMIN')
                ? 'Registrar Orden en Agencia'
                : 'Solicitar Recojo a Domicilio'
            }}
          </h3>

          <form [formGroup]="orderForm" (ngSubmit)="onSubmit()">
            <div class="row g-3">
              <div class="col-md-4">
                <label class="form-label fw-semibold">DNI del Cliente</label>
                <input
                  type="text"
                  class="form-control form-control-lg"
                  formControlName="dniCliente"
                  placeholder="Ej: 71234567"
                  maxlength="8"
                  [ngClass]="{
                    'is-invalid':
                      orderForm.get('dniCliente')?.invalid && orderForm.get('dniCliente')?.touched,
                  }"
                />
              </div>

              <div class="col-md-8">
                <label class="form-label fw-semibold">Nombres y Apellidos</label>
                <input
                  type="text"
                  class="form-control form-control-lg bg-light"
                  formControlName="nombreCompleto"
                  readonly
                  placeholder="Se autocompleta solo..."
                />
              </div>

              <div class="col-md-6">
                <label class="form-label fw-semibold">Peso del Paquete (Kg)</label>
                <div class="input-group">
                  <input
                    type="number"
                    class="form-control form-control-lg"
                    formControlName="pesoPaquete"
                    placeholder="Ej: 2.5"
                  />
                  <span class="input-group-text">Kg</span>
                </div>
              </div>

              <div class="col-12">
                <label class="form-label fw-semibold">
                  {{
                    userRole.includes('ADMIN')
                      ? 'Dirección de Origen / Agencia'
                      : 'Dirección de Recojo (Tu domicilio)'
                  }}
                </label>
                <input
                  type="text"
                  class="form-control form-control-lg"
                  formControlName="direccionRecojo"
                  placeholder="Ej: Av. Los Rosales 123, Surco"
                />
              </div>

              <div class="col-12">
                <label class="form-label fw-semibold">Dirección de Entrega</label>
                <input
                  type="text"
                  class="form-control form-control-lg"
                  formControlName="direccionEntrega"
                  placeholder="Ej: Calle Las Begonias 456, San Isidro"
                />
              </div>

              <div class="col-12 mt-4">
                <div
                  class="p-3 rounded-3"
                  [ngClass]="themeService.isDark() ? 'bg-secondary bg-opacity-25' : 'bg-light'"
                >
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold">Costo Estimado de Envío:</span>
                    <h4 class="text-primary fw-bold mb-0">
                      S/ {{ orderForm.get('costoEnvio')?.value || '0.00' }}
                    </h4>
                  </div>
                </div>
              </div>
            </div>

            <hr class="my-4" [ngClass]="{ 'border-secondary': themeService.isDark() }" />

            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
              <button type="button" routerLink="/dashboard" class="btn btn-light px-4">
                Cancelar
              </button>

              <button
                type="submit"
                class="btn btn-primary px-5 fw-bold"
                [disabled]="orderForm.invalid || isSubmitting"
              >
                <ng-container *ngIf="isSubmitting">Procesando...</ng-container>
                <ng-container *ngIf="!isSubmitting">
                  {{ userRole.includes('ADMIN') ? 'Crear Orden' : 'Confirmar Recojo' }}
                </ng-container>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
